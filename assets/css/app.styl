@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'

// Media queries
$xl = 1600px
$lg = 1260px
$md = 1023px
$sm = 767px
$xs = 330px

// Colors
$primary ?= #fff
$secondary ?= #000
$accent ?= #ff0000

// Metrics
$padding = 10px
$kinetic = cubic-bezier(0.77, 0, 0.175, 1)

// CSS Reset
global-reset()

webfont('Confederation-Regular', 'Confederation-Regular', true, 'normal')

body,html
	width 100%
	-webkit-text-size-adjust 100%
	background $primary

html
	font-size 62.5%
	+below($xs)
		font-size 50%

body
	font-family 'Confederation-Regular', Helvetica Neue, Arial, sans-serif
	font-size 2rem
	text-rendering optimizeLegibility
	font-smoothing()

h1, h2
	text-transform uppercase
	margin-bottom 1em
	&:last-child
		margin-bottom 0

p
	margin-bottom 1em
	line-height 100%

p:last-child
	margin-bottom 0

.title
	font-size 2rem
	letter-spacing -.05em

small, .credits
	font-size 1rem

::selection
	background $secondary
	
::-moz-selection
	background $secondary

*
	hideselect()
	box-sizing(border-box)

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

.lazyimg
	transition(opacity 200ms ease)
	opacity 0

.lazyimg.lazyloaded
	opacity 1

#outdated
	display none
	text-align center
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary
	z-index 900
	a
		border-bottom 1px solid
	.inner
		padding 8rem 20%

.no-js, .no-svg, .no-flexbox
	#outdated
		display block

// @keyframes color {
//     100%, 0% {
//         stroke: #40382e
//     }
//     40% {
//         stroke: #0f0f0f
//     }
//     66% {
//         stroke: #40382e
//     }
//     80%, 90% {
//         stroke: #0f0f0f
//     }
// }

@keyframes rotate {
    100% {
        transform(rotate(360deg))
    }
}

@keyframes backmove {
	100% {
        background-position 0% 50%
    }
    100% {
        background-position 100% 50%
    }
}

@keyframes dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0
    }
    30% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px
    }
}

pattern()
	background transparent url('../../images/pattern.jpg') center repeat
	background-size 800px
	animation backmove 10s linear infinite

#intro
	transition transform 1200ms $kinetic, visibility 1200ms ease
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	z-index 9000
	background-color $secondary
	cursor pointer
	#intro-image
		transition(opacity 1s ease)
		width 100%
		height 100%
		background-color $secondary
		background-position center
		background-size cover
		vendor(filter, grayscale(1))
	&::after
		backface()
		transition opacity 500ms ease//, background-position 500ms ease
		opacity 1
		content ''
		position absolute
		top 0
		left 0
		width 100%
		height 100%
		pattern()
		mix-blend-mode difference
		//vendor(filter, grayscale(1) contrast(0.2))
		z-index 500
	&.hidden
		transform(translateY(-100%) translateZ(0))
		visibility hidden
		#intro-image
			//opacity 0
		

.loader
	display none
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	//background $primary url('../../images/loader.gif') center no-repeat
	background $secondary
	background-size 15px
	z-index 10000
	.spinner
		width 50px
		height 50px
		align()
		.circular
			animation rotate 2s linear infinite
			height 100%
			transform-origin center center
			width 100%
			position absolute
			top 0
			bottom 0
			left 0
			right 0
			margin auto
			.path
				stroke $secondary
				stroke-dasharray 1, 200
				stroke-dashoffset 0
				animation dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite

#elevator
	.fp-section.serie
		.slide.is-selected .patternify
			//background $secondary
			backface()
			img
				+above($md + 1)
					transition(filter 1000ms ease)
					vendor(filter, grayscale(1))
					//opacity 0
			&::after
				backface()
				+above($md + 1)
					transition opacity 1s ease//, background-position 500ms ease
					opacity 1
					content ''
					position absolute
					top 0
					left 0
					width 100%
					height 100%
					pattern()
					mix-blend-mode difference
					//vendor(filter, grayscale(1) contrast(0.2))
					z-index 500
	.fp-section.serie.active
		.slide.is-selected .patternify
			img
				vendor(filter, grayscale(0))
				//opacity 1
			&::after
				transition opacity 0s ease
				//transition-delay 1s
				opacity 0
				//background-position 100% 50%

body
	&::after
		content ''
		backface()
		transition all .2s ease//, background-position 500ms ease
		content ''
		position fixed
		top 0
		left 0
		width 100%
		height 100%
		background $primary
		//pattern()
		//vendor(filter, grayscale(1) contrast(0.2))
		//mix-blend-mode darken
		z-index 5000
	&.loaded::after
		opacity 0
		visibility hidden
	&.loading::after
		opacity 1
		visibility visible
		
.serie
	.slider
		height 100vh
		+below($md)
			height 100%
		.flickity-viewport
			cursor default
		.flickity-slider
			transform none !important
		.slide
			display block
			width 100%
			height 100%
			text-align center
			left 0 !important
			opacity 0
			z-index 0
			.image-content
				position relative
				display inline-block
				text-align center
				height 100%
				img
					display inline-block
					max-height 100%
					+below($md)
						max-width 100%
			.image-content.full, .image-content.contain
				height 100%
				width 100%
				img
					height 100%
					width 100%
					-o-object-position 50% 50%
					object-position 50% 50%
			.image-content.full img
				object-fit cover
				font-family "object-fit: cover"
			.image-content.contain img
				object-fit contain
				font-family "object-fit: contain"
			.image-content.half
				span(1/2)
			.image-content.solo, .image-content.solo.full
				+below($md)
					height 100% !important
				img
					+below($md)
						width 100%
						object-fit contain
						font-family "object-fit: contain"
			.two-images-content
				width 100%
				height 100%
				+below($md)
					flexbox()
					-webkit-box-align center
					-ms-flex-align center
					-ms-grid-row-align center
					align-items center
					justify-content center
				.image-content
					+below($md)
						height 50%
			.collage-content
				width 100vh
				height 100%
				position relative
				+below($md)
					width 100%
					height 100vw
				.collage-item
					position absolute
					img
						max-width 100%
						max-width 100%
		.slide.middle-align
			flexbox()
			-webkit-box-align center
			-ms-flex-align center
			-ms-grid-row-align center
			align-items center
			justify-content center
		.slide.is-selected
			opacity 1
			z-index 1
		.flickity-prev-next-button
			top 0
			height 100%
			width 25%
			margin-top 0
			background transparent
			padding 0
			transform(none)
			border none
			border-radius 0
			z-index 10
			+below($md)
				display none
			svg
				display none
		.flickity-prev-next-button.previous
			cursor w-resize
			left 0
		.flickity-prev-next-button.next
			cursor e-resize
			right 0

.column-about
	span(1/2)
	+below($md)
		col(1/2, gutter: 1, cycle: 2)
		margin-bottom 2em

.column-index
	span(2/8)

.row
	span(1)
	&:not(:last-child)
		+below($md)
			margin-bottom 2em

.desktop
	+below($md)
		display none

.mobile
	+above($md + 1)
		display none

#page-content.page
	span(1)
	padding $padding

#page-content.dark
	background $secondary
	color $primary
	min-height 100vh

[event-target="list-toggle"]
	cursor pointer
	&::after
		content 'Go by list'

[event-target="list-toggle"].list::after
	content 'Go by images'

[data-target="index"]
	span:last-child
		display none
	&:hover
		span:first-child
			display none
		span:last-child
			display block

.index-serie
	span(1)
	counter-reset: slide;
	h2
		span(1.5/8, offset: 2/8)
		flex-grow 1
		display inline-block
		vertical-align top
		margin-bottom 0
	.thumbnails
		// display inline-flex
		// flex-wrap wrap
		// justify-content flex-start
	.thumbnail
		display inline-block
		vertical-align top
		margin-bottom $padding
		margin-right 4px
		a
			position relative
			display block
			&::after
				+above($md + 1)
					//transition opacity .5s ease
					opacity 0
					content ''
					position absolute
					top 0
					left 0
					width 100%
					height 100%
					pattern()
					mix-blend-mode difference
					//vendor(filter, grayscale(1) contrast(0.2))
					z-index 500
			&:hover::after
				+above($md + 1)
					opacity 1
			&:hover img
				//vendor(filter, grayscale(1))
		img
			//transition(filter .5s ease)
			display block
			max-height 150px
			//max-width 150px
			//object-fit contain
		.slide-number
			//display none
			font-size 1rem
			margin-top .5em
		// img.lazyloaded + .slide-number
		// 	display block
		&.newslide
			.slide-number::before
				counter-increment slide
				content counter(slide)

#index-content
	margin-top 2em
	&.list
		.index-serie
			h2
				transition(letter-spacing .5s $kinetic)
			h2:hover
				letter-spacing .2em
			.thumbnail
				display none

#image-hover
	display none
	position fixed
	height calc(100% - 5em)
	align(vertical)
	right 10%


#about-content
	+below($md)
		span(1)
	+above($md + 1)
		width 50%
		padding-right 6.25%
		float left
		height 'calc(100vh - %s)' % ($padding*2)
		flexbox()
		justify-content space-between
		flex-direction column
		position fixed
		top $padding
		left $padding

#about-clients
	+above($md + 1)
		margin-left 50%

#top-bar
	position fixed
	top 0
	left 0
	width 100%
	padding $padding
	background $primary
	#about-btn
		span(1/8)
		float right
		text-align right

#bottom-bar
	position fixed
	bottom 0
	left 0
	width 100%
	font-size 1rem
	padding $padding
	text-transform uppercase
	z-index 1000
	.hover
		visibility hidden
	#image-number
		span(1/16)
	#serie-infos
		span(1/8)
	#index-btn
		align(horizontal)
	#serie-number
		span(1/8, offset: 7/16)
	#serie-nav
		span(1/8)
	#about-btn
		span(1/8)
		text-align right
	&:hover, &.visible
		background $primary
		.hover
			visibility visible

body.loaded
	.loader
		opacity 0
		visibility hidden